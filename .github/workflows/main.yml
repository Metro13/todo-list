name: CI/CD for todo-list

on: 
 push:
   branches:
    - main

jobs:
  # Build Job
 build:
   runs-on: ubuntu-latest
   steps:
     - name: Checkout Code
       uses: actions/checkout@v3
     
     - name: Install Node JS
       uses: actions/setup-node@v3
       with:
        node-version: 20.x

     - name: Install Dependencies
       run: | 
         npm install

     - name: Build Project
       
     - name: Upload Artifact to enable deployment
       uses: actions/upload-artifact@v3
       with:
         name: Production-artifact
         path: 'build/'
         
     - name: Set Environment Variables
       env:
         BASE_PATH: '/${{ github.event.repository.name }}'
         
       run: |
         npm run build

  # Deploy Job
 deploy: 
   needs: build
   runs-on: ubuntu-latest
   steps:
   - name: Download Artifact
     uses: actions/download-artifact@v3
     with:
       name: Production-artifact
       path: 'build/'
       
   - name: Deploy to GitHub Pages
     uses: actions/deploy-pages@v4
     
     with: 
        github_token: ${{secrets.MYGITHUB_SECRETS}}
        publish_dir: 'build/'
     
    
         
     
 
